<!-- Include header template -->
<%- include('../partials/header') %>

        <!-- Page header -->
        <h1 class="mb-4">Add New Player</h1>
        
        <!-- Error message display - shows validation errors -->
        <% if (locals.error) { %>
            <div class="alert alert-danger">
                <strong>Error:</strong> <%= error %>
            </div>
        <% } %>

        <!-- Player creation form -->
        <form method="POST" action="/players" class="mt-4">
            <!-- Basic Information Section -->
            <div class="row mb-4">
                <div class="col-12">
                    <h4 class="border-bottom pb-2">Basic Information</h4>
                </div>
                
                <!-- Player Name Field -->
                <div class="col-md-6 mb-3">
                    <label for="name" class="form-label">Player Name *</label>
                    <input type="text" class="form-control" id="name" name="name" 
                           value="<%= locals.formData ? locals.formData.name : '' %>" 
                           required placeholder="Enter full name">
                    <div class="form-text">Full name of the player</div>
                </div>
                
                <!-- Jersey Number Field -->
                <div class="col-md-3 mb-3">
                    <label for="jerseyNumber" class="form-label">Jersey Number</label>
                    <input type="number" class="form-control" id="jerseyNumber" name="jerseyNumber" 
                           value="<%= locals.formData ? locals.formData.jerseyNumber : '' %>" 
                           min="1" max="99" placeholder="e.g., 7">
                    <div class="form-text">Number between 1-99</div>
                </div>
                
                <!-- Player Role Selection -->
                <div class="col-md-3 mb-3">
                    <label for="role" class="form-label">Player Role *</label>
                    <select class="form-select" id="role" name="role" required>
                        <option value="">Select Role</option>
                        <option value="Batsman" <%= locals.formData && locals.formData.role === 'Batsman' ? 'selected' : '' %>>Batsman</option>
                        <option value="Bowler" <%= locals.formData && locals.formData.role === 'Bowler' ? 'selected' : '' %>>Bowler</option>
                        <option value="All-Rounder" <%= locals.formData && locals.formData.role === 'All-Rounder' ? 'selected' : '' %>>All-Rounder</option>
                        <option value="Wicket-Keeper" <%= locals.formData && locals.formData.role === 'Wicket-Keeper' ? 'selected' : '' %>>Wicket-Keeper</option>
                    </select>
                    <div class="form-text">Primary role in the team</div>
                </div>
            </div>

            <!-- Career Statistics Section -->
            <div class="row mb-4">
                <div class="col-12">
                    <h4 class="border-bottom pb-2">Career Statistics</h4>
                </div>
                
                <!-- Matches Played -->
                <div class="col-md-3 mb-3">
                    <label for="matches" class="form-label">Matches Played *</label>
                    <input type="number" class="form-control" id="matches" name="matches" 
                           value="<%= locals.formData ? locals.formData.matches : '' %>" 
                           min="0" required placeholder="e.g., 50">
                    <div class="form-text">Total matches played</div>
                </div>
                
                <!-- Runs Scored -->
                <div class="col-md-3 mb-3">
                    <label for="runs" class="form-label">Runs Scored</label>
                    <input type="number" class="form-control" id="runs" name="runs" 
                           value="<%= locals.formData ? locals.formData.runs : '0' %>" 
                           min="0" placeholder="e.g., 2500">
                    <div class="form-text">Total career runs</div>
                </div>
                
                <!-- Wickets Taken -->
                <div class="col-md-3 mb-3">
                    <label for="wickets" class="form-label">Wickets Taken</label>
                    <input type="number" class="form-control" id="wickets" name="wickets" 
                           value="<%= locals.formData ? locals.formData.wickets : '0' %>" 
                           min="0" placeholder="e.g., 100">
                    <div class="form-text">Total career wickets</div>
                </div>
                
                <!-- Batting Average -->
                <div class="col-md-3 mb-3">
                    <label for="average" class="form-label">Batting Average</label>
                    <input type="number" class="form-control" id="average" name="average" 
                           value="<%= locals.formData ? locals.formData.average : '0' %>" 
                           min="0" step="0.01" placeholder="e.g., 45.50">
                    <div class="form-text">Runs per dismissal</div>
                </div>
            </div>

            <!-- Advanced Statistics Section -->
            <div class="row mb-4">
                <div class="col-12">
                    <h4 class="border-bottom pb-2">Advanced Statistics</h4>
                </div>
                
                <!-- Strike Rate -->
                <div class="col-md-6 mb-3">
                    <label for="strikeRate" class="form-label">Strike Rate</label>
                    <input type="number" class="form-control" id="strikeRate" name="strikeRate" 
                           value="<%= locals.formData ? locals.formData.strikeRate : '0' %>" 
                           min="0" step="0.01" placeholder="e.g., 135.25">
                    <div class="form-text">Runs per 100 balls faced</div>
                </div>
                
                <!-- Profile Image URL -->
                <div class="col-md-6 mb-3">
                    <label for="image" class="form-label">Profile Image URL</label>
                    <input type="url" class="form-control" id="image" name="image" 
                           value="<%= locals.formData ? locals.formData.image : '' %>" 
                           placeholder="https://example.com/player.jpg">
                    <div class="form-text">Optional player photo URL</div>
                </div>
            </div>

            <!-- Form Action Buttons -->
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-success">
                    Add Player to Team
                </button>
                <a href="/players" class="btn btn-secondary">
                    Cancel
                </a>
            </div>
        </form>

<!-- Include footer template -->
<%- include('../partials/footer') %>