<!-- Include header template -->
<%- include('../partials/header') %>

        <!-- Page header with dynamic title -->
        <h1 class="mb-4">Edit Player - <%= player.name %></h1>
        
        <!-- Error message display -->
        <% if (locals.error) { %>
            <div class="alert alert-danger">
                <strong>Error:</strong> <%= error %>
            </div>
        <% } %>

        <!-- Edit player form -->
        <form method="POST" action="/players/<%= player._id %>/update" class="mt-4">
            <!-- Basic Information Section -->
            <div class="row mb-4">
                <div class="col-12">
                    <h4 class="border-bottom pb-2">Basic Information</h4>
                </div>
                
                <!-- Player Name Field -->
                <div class="col-md-6 mb-3">
                    <label for="name" class="form-label">Player Name *</label>
                    <input type="text" class="form-control" id="name" name="name" 
                           value="<%= player.name %>" required>
                    <div class="form-text">Full name of the player</div>
                </div>
                
                <!-- Jersey Number Field -->
                <div class="col-md-3 mb-3">
                    <label for="jerseyNumber" class="form-label">Jersey Number</label>
                    <input type="number" class="form-control" id="jerseyNumber" name="jerseyNumber" 
                           value="<%= player.jerseyNumber || '' %>" 
                           min="1" max="99">
                    <div class="form-text">Number between 1-99</div>
                </div>
                
                <!-- Player Role Selection -->
                <div class="col-md-3 mb-3">
                    <label for="role" class="form-label">Player Role *</label>
                    <select class="form-select" id="role" name="role" required>
                        <option value="Batsman" <%= player.role === 'Batsman' ? 'selected' : '' %>>Batsman</option>
                        <option value="Bowler" <%= player.role === 'Bowler' ? 'selected' : '' %>>Bowler</option>
                        <option value="All-Rounder" <%= player.role === 'All-Rounder' ? 'selected' : '' %>>All-Rounder</option>
                        <option value="Wicket-Keeper" <%= player.role === 'Wicket-Keeper' ? 'selected' : '' %>>Wicket-Keeper</option>
                    </select>
                    <div class="form-text">Primary role in the team</div>
                </div>
            </div>

            <!-- Career Statistics Section -->
            <div class="row mb-4">
                <div class="col-12">
                    <h4 class="border-bottom pb-2">Career Statistics</h4>
                </div>
                
                <!-- Matches Played -->
                <div class="col-md-3 mb-3">
                    <label for="matches" class="form-label">Matches Played *</label>
                    <input type="number" class="form-control" id="matches" name="matches" 
                           value="<%= player.matches %>" min="0" required>
                    <div class="form-text">Total matches played</div>
                </div>
                
                <!-- Runs Scored -->
                <div class="col-md-3 mb-3">
                    <label for="runs" class="form-label">Runs Scored</label>
                    <input type="number" class="form-control" id="runs" name="runs" 
                           value="<%= player.runs %>" min="0">
                    <div class="form-text">Total career runs</div>
                </div>
                
                <!-- Wickets Taken -->
                <div class="col-md-3 mb-3">
                    <label for="wickets" class="form-label">Wickets Taken</label>
                    <input type="number" class="form-control" id="wickets" name="wickets" 
                           value="<%= player.wickets %>" min="0">
                    <div class="form-text">Total career wickets</div>
                </div>
                
                <!-- Batting Average -->
                <div class="col-md-3 mb-3">
                    <label for="average" class="form-label">Batting Average</label>
                    <input type="number" class="form-control" id="average" name="average" 
                           value="<%= player.average %>" min="0" step="0.01">
                    <div class="form-text">Runs per dismissal</div>
                </div>
            </div>

            <!-- Advanced Statistics Section -->
            <div class="row mb-4">
                <div class="col-12">
                    <h4 class="border-bottom pb-2">Advanced Statistics</h4>
                </div>
                
                <!-- Strike Rate -->
                <div class="col-md-6 mb-3">
                    <label for="strikeRate" class="form-label">Strike Rate</label>
                    <input type="number" class="form-control" id="strikeRate" name="strikeRate" 
                           value="<%= player.strikeRate %>" min="0" step="0.01">
                    <div class="form-text">Runs per 100 balls faced</div>
                </div>
                
                <!-- Profile Image URL -->
                <div class="col-md-6 mb-3">
                    <label for="image" class="form-label">Profile Image URL</label>
                    <input type="url" class="form-control" id="image" name="image" 
                           value="<%= player.image %>" 
                           placeholder="https://example.com/player.jpg">
                    <div class="form-text">Optional player photo URL</div>
                </div>
            </div>

            <!-- Current Statistics Display (Read-only) -->
            <div class="row mb-4">
                <div class="col-12">
                    <h4 class="border-bottom pb-2">Current Statistics</h4>
                    <div class="alert alert-info">
                        <strong>Current Stats:</strong> 
                        <%= player.matches %> matches, 
                        <%= player.runs.toLocaleString() %> runs, 
                        <%= player.wickets %> wickets
                        <% if (player.average > 0) { %>
                            , <%= player.average %> average
                        <% } %>
                        <% if (player.strikeRate > 0) { %>
                            , <%= player.strikeRate %> strike rate
                        <% } %>
                    </div>
                </div>
            </div>

            <!-- Form Action Buttons -->
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-warning">
                    Update Player Stats
                </button>
                <a href="/players/<%= player._id %>" class="btn btn-secondary">
                    Cancel
                </a>
                <a href="/players" class="btn btn-outline-secondary">
                    Back to Squad
                </a>
            </div>
        </form>

<!-- Include footer template -->
<%- include('../partials/footer') %>